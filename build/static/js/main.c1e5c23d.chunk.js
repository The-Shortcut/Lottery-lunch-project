(this.webpackJsonpserver_lottery_lunch=this.webpackJsonpserver_lottery_lunch||[]).push([[0],{39:function(e,t,a){},53:function(e,t,a){e.exports=a(99)},58:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(11),s=a.n(c),o=(a(58),a(9)),l=a(6),u=a(14),i=(a(36),a(37),a(38),a(39),function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(""),m=Object(o.a)(i,2),d=m[0],p=m[1],f={description:"Login and passwords of users",users:{testUser:{password:"test",type:"test"}}},h=function(t){t.preventDefault(),Object.keys(f.users).filter((function(e){return e===c})).length>0&&f.users[c].password===d?(window.localStorage.setItem("user",JSON.stringify(f.users[c])),console.log("Logged in"),function(){var t=e.auth;e.setAuth(!t)}()):alert("Wrong login or password")};return r.a.createElement("div",{className:"login"},r.a.createElement(u.a,null,r.a.createElement(l.c,{size:"3"},r.a.createElement("form",{onSubmit:h},r.a.createElement("p",{className:"h5 text-center mb-4"},"Sign in"),r.a.createElement("div",{className:"grey-text"},r.a.createElement(l.e,{label:"Type your email",icon:"envelope",group:!0,type:"text",validate:!0,error:"wrong",success:"right",getValue:function(e){return s(e)}}),r.a.createElement(l.e,{label:"Type your password",icon:"lock",group:!0,type:"password",validate:!0,getValue:function(e){return p(e)}})),r.a.createElement("div",{className:"text-center"},r.a.createElement(l.b,{type:"submit",onClick:h},"Login"))))))}),m=a(8),d=a.n(m),p=a(15),f=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Lottery Lunch"))},h=function(e){return r.a.createElement("div",{className:"Functionality"},r.a.createElement(l.b,{onClick:function(){return e.generateLottery()}},"Generate lottery"),r.a.createElement(l.b,{onClick:function(){return e.sendEmails()},color:"warning"},"Send Emails"),r.a.createElement("div",{className:"box"},r.a.createElement(l.e,{label:"Add new Interest...",onChange:function(t){var a=t.target;return e.setInterest(a.value)}}),r.a.createElement(l.b,{onClick:function(){return e.handleAddNewInterest()},color:"pink"},"Add new Interest")),r.a.createElement("div",{className:"box"},r.a.createElement(l.e,{label:"Search by email...",onChange:function(t){var a=t.target;return e.setSearchName(a.value)}}),r.a.createElement(l.b,{onClick:function(){return e.handleSearchByName()},color:"info"},"Search user")))},b=function(e){var t=e.emails;return r.a.createElement("div",null,r.a.createElement("h3",null,"Generated emails are"),t.map((function(e,t){return r.a.createElement("div",{key:t,className:"emailsContainer"},e.map((function(e,t){return r.a.createElement("p",{className:"email",key:t},e)})))})))},v=a(16),E=a.n(v),g=function(e){return r.a.createElement("div",null,r.a.createElement("h3",null,"Searched email "),e.searchfromDb&&r.a.createElement("div",null,e.searchName,r.a.createElement(l.b,{onClick:function(){1==window.confirm("Are you sure, you want to remove ".concat(e.searchName,"?"))&&e.deleteByName()},color:"danger"},"Delete User")))},y=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),u=l[0],i=l[1],m=Object(n.useState)(""),v=Object(o.a)(m,2),y=v[0],w=v[1],N=Object(n.useState)(!1),O=Object(o.a)(N,2),j=O[0],x=O[1],k=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat("/api","/lunch-pairs"));case 2:t=e.sent,c(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Emails are ",a),e.next=3,E.a.post("".concat("/api","/users/insertIntoHistory"),a);case 3:t=e.sent,console.log("response from send email is ",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("search name is ",u),e.next=3,E()({method:"get",url:"".concat("/api","/users/:").concat(u),header:{},params:{searchterm:"email",value:"".concat(u)}});case 3:e.sent.data.rowCount>0?x(!0):alert("".concat(u," does not exists in database"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E()({method:"delete",url:"".concat("/api","/users/:").concat(u),header:{},data:{email:"".concat(u)}});case 2:e.sent.data.rowCount>0?alert("".concat(u," removed from database!")):alert("".concat(u," does not exist!")),i("");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y.length>0)){e.next=8;break}return t={interest:"".concat(y)},e.next=4,E.a.post("".concat("/api","/interests/"),t);case 4:e.sent.data.rowCount>0?alert("".concat(y," added to database!")):alert("".concat(y," not added!")),e.next=9;break;case 8:alert("Cannot insert null interest. Please insert proper interest.");case 9:w("");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Main-page"},r.a.createElement(f,null),r.a.createElement(h,{generateLottery:k,sendEmails:S,setSearchName:i,handleSearchByName:C,setInterest:w,handleAddNewInterest:A}),a.length>0&&r.a.createElement(b,{emails:a}),u&&r.a.createElement(g,{searchName:u,deleteByName:I,searchfromDb:j}))},w=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){console.log("auth",a)}),[a]),r.a.createElement("div",{className:"App"},a?r.a.createElement(y,null):r.a.createElement(i,{auth:a,setAuth:c}))};s.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.c1e5c23d.chunk.js.map